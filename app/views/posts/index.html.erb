<div class="container">

  <h1>Annonces</h1>

  <% if user_signed_in? %>
    <%= link_to 'poster une nouvelle annonce', new_post_path %>
  <% end %>

  <hr>
  <%= link_to 'tous', posts_path %>
  <% Column.all.each do |rubrique| %>
    <%= link_to rubrique.name, posts_path(column: rubrique.name) %>
  <% end %>
  <hr>
  <br>

    <% @posts.each do |post| %>

        <div class="card mb-1">
          <div class="card-body">
            <h4 class="card-title"><%= post.title %></h4>
            <% if post.user.avatar.attached? %>
              <%= image_tag post.user.avatar.variant(resize_to_limit: [50, 50]), class: "rounded-circle" %>
            <% end %>
            <h5 class="card-subtitle mb-2 text-muted"><%= post.user.full_name %></h5>
            <p>
              <%= post.body %>
            </p>
            <% if post.picture.attached? %>
              <p>
                <%= image_tag post.picture %>
              </p>
            <% end %>
            <div class="badge bg-warning text-wrap">
              publi√© le <%=l post.created_at, :format => ("%d %B %Y") %><br>
            </div>
            <div class="badge bg-info text-wrap">
              <%= post.column.name %>
            </div>
              <%= link_to 'Show', post %>
            <% if user_signed_in? && current_user.id == post.user.id %>
              <%= link_to 'Edit', edit_post_path(post) %>
              <%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %>
            <% end %>
          </div>
        </div>
      
    <% end %>

</div>